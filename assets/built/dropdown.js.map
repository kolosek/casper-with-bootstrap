{"version":3,"file":"dropdown.js","sources":["dropdown.js"],"sourcesContent":["(function () {\n    const mediaQuery = window.matchMedia('(max-width: 767px)');\n\n    const head = document.querySelector('.gh-head');\n    const menu = head.querySelector('.gh-head-menu');\n    const nav = menu.querySelector('.nav');\n    if (!nav) return;\n\n    const logo = document.querySelector('.gh-head-logo');\n    const navHTML = nav.innerHTML;\n\n    if (mediaQuery.matches) {\n        const items = nav.querySelectorAll('li');\n        items.forEach(function (item, index) {\n            item.style.transitionDelay = 0.03 * (index + 1) + 's';\n        });\n    }\n\n    var windowClickListener;\n    const makeDropdown = function () {\n        if (mediaQuery.matches) return;\n        const submenuItems = [];\n\n        while ((nav.offsetWidth + 64) > menu.offsetWidth) {\n            if (nav.lastElementChild) {\n                submenuItems.unshift(nav.lastElementChild);\n                nav.lastElementChild.remove();\n            } else {\n                return;\n            }\n        }\n\n        if (!submenuItems.length) {\n            document.body.classList.add('is-dropdown-loaded');\n            return;\n        }\n\n        const toggle = document.createElement('button');\n        toggle.setAttribute('class', 'nav-more-toggle');\n        toggle.setAttribute('aria-label', 'More');\n        toggle.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" fill=\"currentColor\"><path d=\"M21.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM13.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM5.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0z\"></path></svg>';\n\n        const wrapper = document.createElement('div');\n        wrapper.setAttribute('class', 'gh-dropdown');\n\n        if (submenuItems.length >= 10) {\n            document.body.classList.add('is-dropdown-mega');\n            wrapper.style.gridTemplateRows = 'repeat(' + Math.ceil(submenuItems.length / 2) + ', 1fr)';\n        } else {\n            document.body.classList.remove('is-dropdown-mega');\n        }\n\n        submenuItems.forEach(function (child) {\n            wrapper.appendChild(child);\n        });\n\n        toggle.appendChild(wrapper);\n        nav.appendChild(toggle);\n\n        document.body.classList.add('is-dropdown-loaded');\n\n        toggle.addEventListener('click', function () {\n            document.body.classList.toggle('is-dropdown-open');\n        });\n\n        windowClickListener = function (e) {\n            if (!toggle.contains(e.target) && document.body.classList.contains('is-dropdown-open')) {\n                document.body.classList.remove('is-dropdown-open');\n            }\n        };\n        window.addEventListener('click', windowClickListener);\n    }\n\n    imagesLoaded(head, function () {\n        makeDropdown();\n    });\n\n    window.addEventListener('resize', function () {\n        setTimeout(function () {\n            window.removeEventListener('click', windowClickListener);\n            nav.innerHTML = navHTML;\n            makeDropdown();\n        }, 1);\n    });\n})();\n"],"names":["mediaQuery","window","matchMedia","head","document","querySelector","menu","nav","windowClickListener","navHTML","innerHTML","matches","items","querySelectorAll","forEach","item","index","style","transitionDelay","makeDropdown","submenuItems","offsetWidth","lastElementChild","unshift","remove","length","toggle","createElement","setAttribute","wrapper","body","classList","add","gridTemplateRows","Math","ceil","child","appendChild","addEventListener","e","contains","target","imagesLoaded","setTimeout","removeEventListener"],"mappings":"CAAA,WACI,IAAMA,EAAaC,OAAOC,WAAW,sBAErC,MAAMC,EAAOC,SAASC,cAAc,YAC9BC,EAAOH,EAAKE,cAAc,iBAC1BE,EAAMD,EAAKD,cAAc,QAC/B,GAAKE,EAAL,CAEaH,SAASC,cAAc,iBAApC,IAUIG,EATEC,EAAUF,EAAIG,UAEpB,GAAIV,EAAWW,QAAS,CACpB,MAAMC,EAAQL,EAAIM,iBAAiB,MACnCD,EAAME,QAAQ,SAAUC,EAAMC,GAC1BD,EAAKE,MAAMC,gBAAkB,KAAQF,EAAQ,GAAK,MAKrC,SAAfG,IACF,IAAInB,EAAWW,QAAf,CACA,MAAMS,EAAe,GAErB,KAAQb,EAAIc,YAAc,GAAMf,EAAKe,aAAa,CAC9C,IAAId,EAAIe,iBAIJ,OAHAF,EAAaG,QAAQhB,EAAIe,kBACzBf,EAAIe,iBAAiBE,SAM7B,GAAKJ,EAAaK,OAAlB,CAKA,MAAMC,EAAStB,SAASuB,cAAc,UACtCD,EAAOE,aAAa,QAAS,mBAC7BF,EAAOE,aAAa,aAAc,QAClCF,EAAOhB,UAAY,siBAEnB,MAAMmB,EAAUzB,SAASuB,cAAc,OACvCE,EAAQD,aAAa,QAAS,eAEH,IAAvBR,EAAaK,QACbrB,SAAS0B,KAAKC,UAAUC,IAAI,oBAC5BH,EAAQZ,MAAMgB,iBAAmB,UAAYC,KAAKC,KAAKf,EAAaK,OAAS,GAAK,UAElFrB,SAAS0B,KAAKC,UAAUP,OAAO,oBAGnCJ,EAAaN,QAAQ,SAAUsB,GAC3BP,EAAQQ,YAAYD,KAGxBV,EAAOW,YAAYR,GACnBtB,EAAI8B,YAAYX,GAEhBtB,SAAS0B,KAAKC,UAAUC,IAAI,sBAE5BN,EAAOY,iBAAiB,QAAS,WAC7BlC,SAAS0B,KAAKC,UAAUL,OAAO,sBAGnClB,EAAsB,SAAU+B,IACvBb,EAAOc,SAASD,EAAEE,SAAWrC,SAAS0B,KAAKC,UAAUS,SAAS,qBAC/DpC,SAAS0B,KAAKC,UAAUP,OAAO,qBAGvCvB,OAAOqC,iBAAiB,QAAS9B,QArC7BJ,SAAS0B,KAAKC,UAAUC,IAAI,uBAwCpCU,aAAavC,EAAM,WACfgB,MAGJlB,OAAOqC,iBAAiB,SAAU,WAC9BK,WAAW,WACP1C,OAAO2C,oBAAoB,QAASpC,GACpCD,EAAIG,UAAYD,EAChBU,KACD,MAlFX"}